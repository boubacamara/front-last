<app-navbar />

<main id="offre-detail">

    <article class="container">
        <div class="row">
            <div class="col s12 l10 offset-l1">
                <div class="card">
                    <div class="card-content">
                      <p><a routerLink="/">Retour aux résultats</a></p>
                      <h2>{{ offre?.titre }}</h2>
                      <div class="row">
                        <div class="col s12 l9">
                            <p>
                                <a href="" class="blue-grey-text text-darken-4 ">{{ offre?.recruteur?.entreprise?.nom }}</a>
                                <span class="separateur"> . </span> 
                                <span>{{ offre?.lieu }}</span>
                                <span class="separateur"> . </span>
                                <span>{{ offre.createdAt | relativeTime }}</span>
                            </p>
                        </div>

                        @if(utilisateurSRV.estConnecte()){
                            @if (dejaPostuler) {
                                <div class="col s12 l3" *ngIf="utilisateur?.role?.intitule === 'candidat'">
                                    <a class="btn white teal-text text-darken-4 right" routerLink="/dashbord"><i class="material-icons left">check</i>en attente</a>
                                </div>
                            }@else {
                                <div class="col s12 l3" *ngIf="utilisateur?.role?.intitule === 'candidat'">
                                    <a class="btn teal darken-4 right" (click)="postuler()"><i class="material-icons left">check</i> Postuler</a>
                                </div>
                            }
                        }@else {
                            <div class="col s12 l3">
                                <a class="btn teal darken-4 right" routerLink="/connexion"><i class="material-icons left">check</i>Potuler</a>
                            </div>
                        }
                        
                    </div>
                    </div>
                    
                    <div class="card-image">
                        @if (entrepriseMedia.type !== 'entreprise') {
                            <img src="https://cdn.pixabay.com/photo/2017/02/03/09/58/banner-2034863_1280.png" class="responsive-img" alt="bannier entreprise">
                        }@else {
                            <img [src]="entrepriseMedia?.lien" height="320" class="offre-img" alt="bannier entreprise">
                        }
                    </div>

                    <div class="card-content">
                        <span class="card-title blue-grey lighten-5 autheur">Publier par: {{offre?.recruteur?.profile?.nom}} {{offre?.recruteur?.profile.prenom}}</span>
                        <h4 class="blue-grey-text text-darken-3">Description</h4>

                        <p>{{ offre?.description }}</p>

                        <h4>Compétences requises</h4>
                        <p>{{ offre?.competences }}</p>

                        <h4>Expérience requise</h4>
                        <p>{{ offre?.exigences }}</p>

                        <h5>Niveau d'éducation requis</h5>
                        <p>{{ offre?.educationRequise }}</p>

                        <h5>Informations complémentaires</h5>

                        <table class="striped">
                            <tbody>
                                <tr>
                                    <td>Type de contrat</td>
                                    <td>{{ offre?.typeContrat | uppercase }}</td>
                                </tr>
                                <tr>
                                    <td>Salaraire</td>
                                    <td>{{ offre?.salaire |number: '1.0-0' }} FCFA</td>
                                </tr>
                                <tr>
                                    <td>Lieu </td>
                                    <td>{{ offre?.lieu | uppercase }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                   
                  </div>
            </div>
        </div>
    </article>
</main>